
<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/gsap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/MotionPathPlugin.min.js"></script>
    </head>
    <body>
        <div id="buttonSVG">
            <svg id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 297.72 321.03" height="400" width="400">
                <path id="pathCircle" d="M180.87,667.54A113.48,113.48,0,1,1,294.35,554.06,113.48,113.48,0,0,1,180.87,667.54Z" transform="translate(-43.92 -381.93)" fill="#fff" stroke="#969696" stroke-miterlimit="10"/>
                <g id="overview">
                  <circle id="overviewPath" cx="140.67" cy="58.96" r="58.96" fill="#2a9d8f"/>
                  <path id="overviewShadow" d="M233.85,472.77a58.76,58.76,0,0,1-98.52.47" transform="translate(-43.92 -381.93)" opacity="0.08"/>
                  <g id="overviewIcon">
                    <path d="M211.86,440.1a27.33,27.33,0,0,0-4.3-13.07h-.08v-.08a28.71,28.71,0,0,0-2.4-3.2,15.2,15.2,0,0,0,1.54-5.95c0-7.32-4.73-12.05-12.05-12.05-6.17,0-10.5,3.36-11.7,8.81a27.32,27.32,0,1,0,29,25.55Zm-17.38-32.86v0c5.1,0,10.55,2.77,10.55,10.55a14.25,14.25,0,0,1-1.59,5.75v.05c-2.53,5.41-7.31,11.12-8.93,13C192.26,434,184,424,184,417.77,183.94,410,189.39,407.24,194.48,407.24ZM158.7,441.8a25.82,25.82,0,0,1,17.2-24.35c-.31,1.3.06,2.91,1.13,4.81a22.2,22.2,0,0,0,2.64,3.6c1.87,2.19,2.63,3.1.6,5.48-1.2,1.39-3,1.88-4.88,2.4-3.26.9-6.95,1.91-7.44,7.87-.54,6.37-1.81,9.07-2.69,9.43-.09,0-.29.12-.69-.22s-.66-2-.86-3.26c-.4-2.53-.81-5.15-2.55-5.8a2.83,2.83,0,0,0-2.46.38Zm.66,5.81a27.55,27.55,0,0,1-.58-3.73v-.05c.8-.6,1.46-.87,1.85-.72.91.35,1.31,2.83,1.59,4.63s.55,3.51,1.36,4.2a2.36,2.36,0,0,0,1.51.61,1.85,1.85,0,0,0,.74-.15c2.33-.95,3.26-6.34,3.6-10.7.41-4.91,3.16-5.67,6.35-6.54,2-.56,4.14-1.13,5.62-2.87,2.87-3.37,1.26-5.25-.6-7.44a21,21,0,0,1-2.48-3.39c-1.16-2.06-1.15-3.24-.94-3.88a1.47,1.47,0,0,1,.72-.88,25.37,25.37,0,0,1,4.4-.71,16.34,16.34,0,0,0-.1,1.71c0,7.72,11,19.93,11.49,20.44a.76.76,0,0,0,1.07.05.12.12,0,0,0,0-.05,69.66,69.66,0,0,0,9.25-13,26.66,26.66,0,0,1,1.92,2.68c.29.56,1.41,3.24-1.71,5.4-2.5,1.74-3.8,3.48-4,5.33s.6,3.44,2.3,5.29a9.3,9.3,0,0,1,2,8.16,5.29,5.29,0,0,1-3.32,4c-2.61.93-10.93,4.42-11.18,11A25.8,25.8,0,0,1,159.36,447.61Zm36,17.62a26.73,26.73,0,0,1-3.46,1.31v-.06c.6-5.33,7.8-8.33,10.14-9.16a6.78,6.78,0,0,0,4.28-5,10.94,10.94,0,0,0-2.4-9.56c-1.41-1.51-2-2.84-1.91-4.09s1.25-2.78,3.37-4.25a6.22,6.22,0,0,0,2.58-3.42A25.81,25.81,0,0,1,195.32,465.23Z" transform="translate(-43.92 -381.93)" fill="#fff"/>
                    <path d="M194.48,411.49a6.29,6.29,0,1,0,0,12.58h0a6.29,6.29,0,1,0,0-12.58Zm0,11.11a4.8,4.8,0,1,1,4.81-4.8A4.8,4.8,0,0,1,194.48,422.6Z" transform="translate(-43.92 -381.93)" fill="#fff"/>
                  </g>
                </g>
                <g id="relate">
                  <circle id="relatePath" cx="23.59" cy="172.17" r="23.59" fill="#e76f51"/>
                  <g id="relateIcon">
                    <path d="M66.85,565.8a1.26,1.26,0,0,0,1.21-.91h6a1.26,1.26,0,0,0,2.42,0h2a.36.36,0,1,0,0-.71h-2a1.26,1.26,0,0,0-.81-.84,14.53,14.53,0,0,0-2.68-7.7l-2.66-3.73.52-.32a9.89,9.89,0,0,0,4.71-7.3,1.24,1.24,0,0,0,.92-.88h2a.35.35,0,0,0,.36-.35.36.36,0,0,0-.36-.35h-2a1.26,1.26,0,0,0-2.42,0h-6a1.26,1.26,0,0,0-2.42,0H59.87a1.27,1.27,0,0,0-2.43,0H55.25a.35.35,0,0,0-.35.35.35.35,0,0,0,.35.35h2.19a1.28,1.28,0,0,0,.83.85,14.69,14.69,0,0,0,2.62,7.28l2.57,3.69-.38.23a9.82,9.82,0,0,0-4.75,7.86,1.26,1.26,0,0,0-.89.86H55.25a.36.36,0,0,0,0,.71h2.19a1.27,1.27,0,0,0,2.43,0h5.77A1.27,1.27,0,0,0,66.85,565.8Zm9-1.27a.56.56,0,0,1-1.12,0v0a.56.56,0,0,1,1.12,0Zm-.56-22a.56.56,0,0,1,0,1.12.57.57,0,0,1-.56-.55h0A.57.57,0,0,1,75.29,542.5Zm-8.44,0a.56.56,0,1,1,0,1.12.57.57,0,0,1-.56-.55h0A.57.57,0,0,1,66.85,542.5Zm-8.75.56a.56.56,0,1,1,.56.56A.56.56,0,0,1,58.1,543.06Zm3.36,8.08A14.15,14.15,0,0,1,59,544.28a1.28,1.28,0,0,0,.89-.87h5.77a1.28,1.28,0,0,0,.91.88A14.62,14.62,0,0,0,68.84,551a.35.35,0,0,0,.48.1.36.36,0,0,0,.11-.49,13.81,13.81,0,0,1-2.17-6.33,1.28,1.28,0,0,0,.8-.85h6a1.25,1.25,0,0,0,.79.84A9.16,9.16,0,0,1,70.51,551l-6.45,3.88ZM59,563.33a9.12,9.12,0,0,1,4.41-7.27l6.3-3.79,2.69,3.78A13.79,13.79,0,0,1,75,563.31a1.25,1.25,0,0,0-.91.87h-6a1.26,1.26,0,0,0-.83-.85A14.92,14.92,0,0,0,65,556.18a.36.36,0,0,0-.6.38,14,14,0,0,1,2.16,6.76,1.25,1.25,0,0,0-.88.86H59.87A1.3,1.3,0,0,0,59,563.33Zm-.37,1.76a.56.56,0,1,1,.55-.56A.56.56,0,0,1,58.66,565.09Zm7.63-.55h0a.56.56,0,0,1,.56-.55.56.56,0,1,1,0,1.11A.57.57,0,0,1,66.29,564.54Z" transform="translate(-43.92 -381.93)" fill="#fff"/>
                  </g>
                  <path id="relateShadow" d="M87.21,566.89a24.23,24.23,0,0,1-3,3.72A23.49,23.49,0,0,1,51,571a23.73,23.73,0,0,1-3.22-3.91" transform="translate(-43.92 -381.93)" opacity="0.08"/>
                </g>
                <g id="details">
                  <circle id="detailPath" cx="137.07" cy="285.65" r="35.38" fill="#f4a261"/>
                  <g id="detailGlass">
                    <path d="M174.78,664.33a13.09,13.09,0,1,0,4-3.69l-9.63-9.58a2.73,2.73,0,0,0-4,3.77l.09.1Zm10.67-.89a8.43,8.43,0,1,1-8.42,8.44,8.42,8.42,0,0,1,8.42-8.44Z" transform="translate(-43.92 -381.93)" fill="none" stroke="#fff" stroke-miterlimit="10" stroke-width="1.5"/>
                  </g>
                  <path id="detailShadow" d="M211,686.77a35.25,35.25,0,0,1-54.27,6.15,35.6,35.6,0,0,1-4.84-5.87" transform="translate(-43.92 -381.93)" opacity="0.08"/>
                </g>
                <g id="filter">
                  <circle id="filterPath" cx="250.55" cy="172.17" r="47.17" fill="#e9c267"/>
                  <g id="filterIcon">
                    <line x1="245.36" y1="157.73" x2="245.61" y2="185.09" fill="#6dbe45" stroke="#fff" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/>
                    <line x1="253.08" y1="157.68" x2="253.33" y2="185.05" fill="#6dbe45" stroke="#fff" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/>
                    <line x1="260.97" y1="157.67" x2="261.22" y2="185.03" fill="#6dbe45" stroke="#fff" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"/>
                    <circle cx="245.49" cy="162.3" r="2.52" fill="#e9c369" stroke="#fff" stroke-miterlimit="10" stroke-width="2"/>
                    <circle cx="253.3" cy="181.69" r="2.52" fill="#e9c369" stroke="#fff" stroke-miterlimit="10" stroke-width="2"/>
                    <circle cx="261.1" cy="168.83" r="2.52" fill="#e9c369" stroke="#fff" stroke-miterlimit="10" stroke-width="2"/>
                  </g>
                  <path id="filterShadow" d="M334.11,579.69a47.8,47.8,0,0,1-5.93,7.44,47,47,0,0,1-66.44.75,47.52,47.52,0,0,1-6.45-7.82" transform="translate(-43.92 -381.93)" opacity="0.08"/>
                </g>
                <g id="presentation">
                  <circle id="presentationCircle" cx="140.67" cy="172.17" r="41.44" fill="#264653"/>
                  <g id="presentationIcon">
                    <path d="M201.11,541.28a.52.52,0,0,0,.53-.52v-2.09a.53.53,0,0,0-.53-.52h-25a.52.52,0,0,0-.52.52v2.09a.52.52,0,0,0,.52.52h.52v8.62a4.69,4.69,0,0,0-1,8.33,2.28,2.28,0,0,0,0,.26H174a4.71,4.71,0,0,0-4.7,4.69V570a.53.53,0,0,0,.52.53H183.9a.53.53,0,0,0,.53-.53V566a2.6,2.6,0,0,1,.76-1.84l7.27-7.27h8.65a.53.53,0,0,0,.53-.52v-2.09a.52.52,0,0,0-.53-.52h-.52V541.28ZM176.6,539.2h24v1h-24Zm1.57,11.47a3.57,3.57,0,0,1,.8.09,4.71,4.71,0,0,1-3.41,1.47h-.38A3.65,3.65,0,0,1,178.17,550.67Zm9.69,4.17-1,1h-4.23a4.5,4.5,0,0,0,.24-1Zm4,1.22-.13.13-1.87-1.87.13-.14a1.35,1.35,0,0,1,.94-.38,1.32,1.32,0,0,1,1.32,1.32A1.33,1.33,0,0,1,191.86,556.06Zm-13.69,3a4.65,4.65,0,0,0,1.54-.26,1.58,1.58,0,0,1-1.54,1.31,1.56,1.56,0,0,1-1.54-1.31A4.61,4.61,0,0,0,178.17,559Zm2.59-.78a4.77,4.77,0,0,0,1.31-1.3h3.71l-.81.8a2.58,2.58,0,0,1-1.84.76h-2.35a2.28,2.28,0,0,0,0-.26Zm-.76-7.07a3.79,3.79,0,0,1,1.42,1.5,4.72,4.72,0,0,1-2-.91A6.28,6.28,0,0,0,180,551.16Zm-5.48,3.16a3.58,3.58,0,0,1,.15-1h.89a5.75,5.75,0,0,0,3-.88,5.81,5.81,0,0,0,3.18,1.37,3.31,3.31,0,0,1,0,.55,3.65,3.65,0,0,1-7.3,0Zm9.93,9.14a3.63,3.63,0,0,0-1.07,2.58v3.4h-8.86v-5.73h-1v5.73h-3.13v-6.26a3.65,3.65,0,0,1,3.65-3.65h1.78a2.6,2.6,0,0,0,4.77,0h2.58a3.63,3.63,0,0,0,2.58-1.07l3.41-3.4,1.87,1.87Zm16.14-7.58h-7.43a2.38,2.38,0,0,0,.13-.76,2.4,2.4,0,0,0,0-.28h7.33Zm-1-2.08h-6.66a2.36,2.36,0,0,0-3.64-.35l-.35.35h-6.07a4.69,4.69,0,0,0-4.66-4.17,4.41,4.41,0,0,0-.52,0v-8.38h21.9Z" transform="translate(-43.92 -381.93)" fill="#fff"/>
                    <path d="M183.38,549.63a3.66,3.66,0,1,0-3.65-3.65A3.65,3.65,0,0,0,183.38,549.63Zm0-1a2.58,2.58,0,0,1-1.91-.85l2.06-1.23h2.41a2.61,2.61,0,0,1-2.56,2.08Zm2.56-3.13h-2v-2A2.62,2.62,0,0,1,185.94,545.45Zm-3.08-2v2.26l-1.93,1.16a2.72,2.72,0,0,1-.15-.86A2.61,2.61,0,0,1,182.86,543.42Z" transform="translate(-43.92 -381.93)" fill="#fff"/>
                    <path d="M189.64,550.15H198a.53.53,0,0,0,.53-.52v-2.09A.52.52,0,0,0,198,547h-.52v-1.57h-1V547h-1v-2.61h-1V547h-1v-3.65h-1V547h-1v-4.7h-1.05V547h-.52a.52.52,0,0,0-.52.52v2.09A.52.52,0,0,0,189.64,550.15Zm.52-2.09h7.3v1h-7.3Z" transform="translate(-43.92 -381.93)" fill="#fff"/>
                  </g>
                </g>
                <path d="M222.55,484.92" transform="translate(-43.92 -381.93)" fill="none" stroke="#969696" stroke-miterlimit="10"/>
              </svg>
                
        </div>
        <script>
            gsap.registerPlugin(MotionPathPlugin);
            var el = document.getElementById("presentationCircle");
            var bbox = el.getBBox();
            console.log(bbox)
            var centerOfSvg = {
                x: bbox.x + bbox.width /2,
                y: bbox.y + bbox.height /2
            };
        var pivotPoint = (centerOfSvg.x +" "+ centerOfSvg.y)
        console.log(pivotPoint)
        var presentationBool = false;
        var stopBool = false;
        var topPosition = [];
        var elementsArray = [];
        var clickedElement = [];
        var presentationCircle = document.getElementById("presentation"),
            overview = document.getElementById("overview"),
            filter = document.getElementById("filter"),
            details = document.getElementById("details"),
            relate = document.getElementById("relate"),
            originPoint = document.getElementById("customButton"),
            pathCircle = document.getElementById("pathCircle");
            animateButton = document.getElementById("animateButton");
            gsap.to([filter, details,relate],{css:{opacity:"0.5"}})
        topPosition.push(overview)
        //if(Math.sign(gsap.getProperty(details, "rotation"))=== 1){ //Negative round
        let startForth = () => {
        var forthTl = gsap.timeline({repeat: false});
        TweenMax.set(clickedElement[0], {svgOrigin: `${pivotPoint}`})
        TweenMax.to([overview, filter, details, relate], {duration:1, rotation: `${gsap.getProperty(overview, "rotation")-90}`,svgOrigin: `${pivotPoint}`, onStart: changeOpacity, onStartParams: [topPosition, "param"]});
        }
        let startBack = () => {
         gsap.to([overview, filter, details, relate], {duration:1, rotation: `${gsap.getProperty(overview, "rotation")+90}`, svgOrigin: `${pivotPoint}` , onStart: changeOpacity, onStartParams: [topPosition, "param"]});
        }
        let startHalfCircle = () => {
         gsap.to([overview, filter, details, relate], {duration:1, rotation: `${gsap.getProperty(overview, "rotation")+180}`, svgOrigin: `${pivotPoint}`,onStart: changeOpacity,  onStartParams: [topPosition, "param"]});
  
        }

          $("#filter").click(function(){
            clickedElement.push(filter);
            if(topPosition[0] === overview){ //Works
              topPosition.pop()
              topPosition.push(filter)
              startForth();
            }
            if(topPosition[0]=== relate){//Works
              topPosition.pop()
              topPosition.push(filter)
              startHalfCircle();
            }
            if(topPosition[0]=== details){ //Works
              topPosition.pop()
              topPosition.push(filter)
              startBack();
            }
          })
          $("#overview").click(function(){
            if(topPosition[0] === filter){ //works
              topPosition.pop()
              topPosition.push(overview)
              startBack();
            }
            if(topPosition[0]=== relate){//Works
              topPosition.pop()
              topPosition.push(overview)
              startForth();
            }
            if(topPosition[0]=== details){//Works
              topPosition.pop()
              topPosition.push(overview)
              startHalfCircle();
            }
          })
          $("#details").click(function(){
            if(topPosition[0] === overview){//Works
              topPosition.pop()
              topPosition.push(details)
              startHalfCircle();
            }
            if(topPosition[0]=== relate){//Works
              topPosition.pop()
              topPosition.push(details)
              startBack();
            }
            if(topPosition[0]=== filter){//Works
              topPosition.pop()
              topPosition.push(details)
              startForth();
            }
          })
          $("#relate").click(function(){
            if(topPosition[0] === overview){//Works
              topPosition.pop()
              topPosition.push(relate)
              startBack();
            }
            if(topPosition[0]=== filter){ //Works
              topPosition.pop()
              topPosition.push(relate)
              startHalfCircle();
            }
            if(topPosition[0]=== details){//Works
              topPosition.pop()
              topPosition.push(relate)
              startForth();
            }
          })

        let animatePresentationCircle = () => {
          if(presentationBool === false) {
            presentationBool = true;
            console.log(presentationBool)
            gsap.to(presentation, {scale:1.5, opacity:"1", transformOrigin:"center center", onStart: changeOpacity, onStartParams: ["everything"]})
          } else {
            presentationBool = false;
            gsap.to(presentation, {scale:1,opacity:"0.5", transformOrigin:"center center", onStart: changeOpacity, onStartParams: ["reset"]})
          }
        }

        
        let changeOpacity = (a) => {
          console.log(a)
          if(a[0] === filter) {
            console.log("Filter selected")
          }
            switch(a[0]) {
            case overview:
                gsap.to([filter, details, relate], {css:{opacity:"0.5"}});
                gsap.to(overview, {css:{opacity:"1"}})
                break;
            case filter:
                gsap.to([details, relate], {/* scale: "+=.2" ,*/ opacity:"0.5"});
                gsap.to(overview, {/* scale: "-=.2" */})
                gsap.to(filter, {opacity:1,})
                break;
            case details:
                gsap.to([overview, filter, relate], {css:{opacity:"0.5"}});
                gsap.to(details, {css:{opacity:"1"}})
                break;
            case relate:
                gsap.to([overview, filter, details], {css:{opacity:"0.5"}});
                gsap.to(relate, {css:{opacity:"1"}})
                break;
            case "everything":
                gsap.to([overview, filter, details, relate], {css:{opacity:"0.5"}});
                break
            case "reset":
                gsap.to(topPosition[0], {css:{opacity:"1"}});
                break
        }
       
    }

        presentationCircle.onclick = animatePresentationCircle


        var overviewHighlight = () => {
          if(topPosition[0] === overview) {}else {
            gsap.to(overview, {css:{opacity:"1"}})
          }
        }
        var filterHighlight = () => {
          if(topPosition[0] === filter) {}else {
            gsap.to(filter, {css:{opacity:"1"}})
          }
        }
        var relateHighlight = () => {
          if(topPosition[0] === relate) {}else {
            gsap.to(relate, {css:{opacity:"1"}})
          }
        }
        var detailsHighlight = () => {
          if(topPosition[0] === details) {}else {
            gsap.to(details, {css:{opacity:"1"}})
          }
        }

        var enlargenCircle = () => {
          gsap.to(presentationCircle, {css:{opacity:"1"}});
        }

        overview.onmouseover = overviewHighlight
        filter.onmouseover= filterHighlight
        relate.onmouseover= relateHighlight
        details.onmouseover = detailsHighlight
        presentationCircle.onmouseover = enlargenCircle

        var DoverviewHighlight = () => {
          if(topPosition[0] === overview) {}else {
            gsap.to(overview, {css:{opacity:"0.5"}})
          }
        }
        var DfilterHighlight = () => {
          if(topPosition[0] === filter) {}else {
            gsap.to(filter, {css:{opacity:"0.5"}})
          }
        }
        var DrelateHighlight = () => {
          if(topPosition[0] === relate) {}else {
            gsap.to(relate, {css:{opacity:"0.5"}})
          }
        }
        var DdetailsHighlight = () => {
          if(topPosition[0] === details) {}else {
            gsap.to(details, {css:{opacity:"0.5"}})
          }
        }
        var delargenCircle = () => {
          if(presentationBool === false) {
            gsap.to(presentationCircle, {css:{opacity:"0.5"}});
          }
        }


        overview.onmouseleave = DoverviewHighlight
        filter.onmouseleave= DfilterHighlight
        relate.onmouseleave= DrelateHighlight
        details.onmouseleave = DdetailsHighlight
        presentationCircle.onmouseleave = delargenCircle


        </script>   
    </body> 
</html>